<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        /* The Modal (background) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 101; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 150%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            /*background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            animation: animatetop 0.2s;
            -webkit-animation: animatetop 0.2s;
        }
        /* Add Animation */
        @keyframes animatetop {
            from {top: -300px; opacity: 0}
            to {top: 0; opacity: 1}
        }
        @-webkit-keyframes animatetop {
            from {top:-300px; opacity:0} 
            to {top:0; opacity:1}
        }
        .close {
            float:right;
            padding: 5px 15px;
            font-size: 24pt;
            position:absolute;
            transition: 0.2s;
            z-index: 100;
            cursor: pointer;
        }
        .close:hover {
            background-color: rgb(172, 44, 44);
            color:white;
            
        }
        /* Modal Content/Box */
        .modal-content {
            background-color: #3d3d3dda;
            margin: 5% auto; /* 15% from the top and centered */
            padding: 10px;
            text-align: center;
            font-size: 15pt;
            border: 1px solid #888;
            width: 50%; /* Could be more or less, depending on screen size */
            color: white;
        }
        #modalImage {
            position: relative;
            width:100%;
        }
        body {
            margin:0;
        }
        img {
            position: absolute;
        }
        .hover {
            position:absolute;
            z-index: 100;
            cursor: pointer;
        }
        .hover:hover + .overlay_image {
            display:block;
        }
        
        .overlay_image {
            width:100%;
            display:none;
        }
        .hover:hover + #poi_name {
            color:green;
        }

        #poi_name {
            display: none;
            z-index: 120;
            font-size: 24pt;
            color:white;
            position: absolute;
            text-align: center;
            width:100%;
            bottom:0;
            background-color:rgba(0, 0, 0, 0.6);
            padding: 0.5em 0;
        }
        #coral_1 {
            top: 13.5vw;
            width:21vw;
            height:11vw;
        }
        #coral_2 {
            top: 17vw;
            left:21vw;
            width:2.5vw;
            height:5vw;
        }
        #beach {
            top: 7vw;
            left:12vw;
            width:11vw;
            height:7vw;
        }
    </style>
</head>
<body>
    <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <img id="modalImage" alt="No Image" src="images/beach.JPG">
            <h3 id="modalTitle">Heading</h3>
            <p id="modalDesc">Some text in the Modal..</p>
        </div>
    </div>
    <img style="width:100%;" src="images/Final_map_edited.png">
    <h1 id="poi_name"></h1>
<!--
    <a class="hover" id="coral_1" onmouseover="change_text('Coral Patch #1')" onmouseout="remove_text()"></a>
    <img id="test" class="overlay_image" src="images_overlay/coral_1.png">

    <a class="hover" id="coral_2" onmouseover="change_text('Coral Patch #2')" onmouseout="remove_text()"></a>
    <img id="test" class="overlay_image" src="images_overlay/coral_2.png">

    <a class="hover" id="beach" onmouseover="change_text('Sea Dancer Beach')" onmouseout="remove_text()"></a>
    <img id="test" class="overlay_image" src="images_overlay/beach.png">
-->
    <div id="wrapper">

    </div>
    <script>
        var modal      = document.getElementById("myModal");
        var modalTitle = document.getElementById("modalTitle");
        var modalImg   = document.getElementById("modalImage");
        var modalDesc  = document.getElementById("modalDesc");

        var span = document.getElementsByClassName("close")[0];
        span.onclick = function() {
            modal.style.display = "none";
        }        

        function showModal(title, image_name, depth_data){
            console.log(title, image_name, depth_data);
            modalTitle.innerHTML = title;
            if (image_name){
                modalImg.src = "images/"+image_name;
            }else{
                modalImg.src = "";
            }
            modalDesc.innerHTML = "Depth: "+depth_data;
            modal.style.display = "block";
        }

        function change_text(text){
            var x = document.getElementById("poi_name");
            x.innerHTML = text;
            x.style.display = "block";
        }
        function remove_text(){
            var x = document.getElementById("poi_name");
            x.style.display = "none";
        }

        var data = [
            {"name":"Coral Patch #1", "image":"coral_1.png", "item_image":"coral1_1.JPG", "style":{"top":13.5, "left":0, "w":21, "h":11}, "depth":"2m - 5m" },
            {"name":"Coral Patch #2", "image":"coral_2.png", "item_image":"coral_pin.JPG", "style":{"top":17, "left":21, "w":2.5, "h":7}, "depth":"2m - 7m" },
            {"name":"Beach", "image":"beach.png", "item_image":"beach.JPG", "style":{"top":7, "left":12, "w":11, "h":7}, "depth":"0m - Surface" },
            {"name":"Tires", "image":"tires.png", "item_image":"tires.JPG", "style":{"top":19, "left":25, "w":7, "h":7}, "depth":"5m - 8m" },
            {"name":"A Toilet", "image":"toilet.png", "item_image":"toilet.JPG", "style":{"top":17, "left":42, "w":2, "h":2}, "depth":"6m" },
            {"name":"Playground", "image":"playground.png", "item_image":"playground.JPG", "style":{"top":20, "left":44, "w":7, "h":8}, "depth":"8m - 9m" },
            {"name":"Elephant", "image":"elephant.png", "item_image":"elephant.JPG", "style":{"top":38, "left":62, "w":5, "h":5}, "depth":"26m" },
            {"name":"Coral Patch #3", "image":"coral_3.png", "item_image":"coral_wall.JPG", "style":{"top":47, "left":90, "w":10, "h":10}, "depth":"1m - 20m" },
            {"name":"Easy #1", "image":"easy1.png", "item_image":"easy1.JPG", "style":{"top":6, "left":22, "w":4, "h":4}, "depth":"Surface" },
            {"name":"Easy #2", "image":"easy2.png", "item_image":"easy2.JPG", "style":{"top":21, "left":78, "w":4, "h":5}, "depth":"Surface" }
        ]

        window.onload = function() {
            console.log("Load");
            console.log(data);
            for (var i = 0; i < data.length; i++){
                var x = document.createElement("a");
                var im = document.createElement("img");
                x.className = "hover";
                im.className = "overlay_image";

                x.style.position = "absolute";
                im.style.position = "absolute";

                x.style.top = data[i]["style"]["top"]+"vw";
                x.style.left = data[i]["style"]["left"]+"vw";
                x.style.width = data[i]["style"]["w"]+"vw";
                x.style.height = data[i]["style"]["h"]+"vw";

                // Only way that it will work
                x.setAttribute('onmouseover', "change_text('"+data[i]["name"]+"')");
                x.setAttribute('onmouseleave', "remove_text()");
                x.setAttribute('onclick', "showModal('"+data[i]["name"]+"','"+ data[i]["item_image"]+"','"+data[i]["depth"]+"')");

                im.src ="images_overlay/"+data[i]["image"];

                document.getElementById("wrapper").appendChild(x);
                document.getElementById("wrapper").appendChild(im);
                
                console.log(data[i]["name"]);
            }
        }
    </script>

</body>
</html>